<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Song Art - Guess the Song Game</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect, useRef } = React;
    
    // Lucide React icons as inline SVG components
    const Music = ({ className }) => (
      <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M9 18V5l12-2v13"></path>
        <circle cx="6" cy="18" r="3"></circle>
        <circle cx="18" cy="16" r="3"></circle>
      </svg>
    );

    const CheckCircle = ({ className }) => (
      <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
        <polyline points="22 4 12 14.01 9 11.01"></polyline>
      </svg>
    );

    const XCircle = ({ className }) => (
      <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="15" y1="9" x2="9" y2="15"></line>
        <line x1="9" y1="9" x2="15" y2="15"></line>
      </svg>
    );

    const RotateCcw = ({ className }) => (
      <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <polyline points="1 4 1 10 7 10"></polyline>
        <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
      </svg>
    );

    const Lightbulb = ({ className }) => (
      <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <line x1="9" y1="18" x2="15" y2="18"></line>
        <line x1="10" y1="22" x2="14" y2="22"></line>
        <path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 18 8 6 6 0 0 0 6 8c0 1 .23 2.23 1.5 3.5A4.61 4.61 0 0 1 8.91 14"></path>
      </svg>
    );

    const Volume2 = ({ className }) => (
      <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
        <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
      </svg>
    );

    const SONGS = [
      {
        title: "Bohemian Rhapsody",
        artist: "Queen",
        colors: ["#8B4513", "#FFD700", "#FF0000", "#000000"],
        shapes: ["circle", "triangle", "square"],
        description: "Operatic rock masterpiece",
        youtubeId: "fJ9rUzIMcZQ"
      },
      {
        title: "Stairway to Heaven",
        artist: "Led Zeppelin",
        colors: ["#87CEEB", "#FFFFFF", "#FFD700", "#C0C0C0"],
        shapes: ["triangle", "rectangle", "circle"],
        description: "Epic rock ballad with ascending progression",
        youtubeId: "QkF3oxziUI4"
      },
      {
        title: "Purple Rain",
        artist: "Prince",
        colors: ["#800080", "#4B0082", "#191970", "#9370DB"],
        shapes: ["circle", "wave", "rectangle"],
        description: "Emotional power ballad",
        youtubeId: "TvnYmWpD_T8"
      },
      {
        title: "Imagine",
        artist: "John Lennon",
        colors: ["#FFFFFF", "#87CEEB", "#F0E68C", "#98FB98"],
        shapes: ["circle", "square", "rectangle"],
        description: "Peaceful, hopeful anthem",
        youtubeId: "YkgkThdzX-8"
      },
      {
        title: "Billie Jean",
        artist: "Michael Jackson",
        colors: ["#000000", "#FFFFFF", "#FF0000", "#C0C0C0"],
        shapes: ["square", "circle", "rectangle"],
        description: "Iconic pop with distinctive bassline",
        youtubeId: "Zi_XLOBDo_Y"
      },
      {
        title: "Hotel California",
        artist: "Eagles",
        colors: ["#FF8C00", "#8B4513", "#FFD700", "#654321"],
        shapes: ["rectangle", "circle", "triangle"],
        description: "Classic rock with memorable guitar solo",
        youtubeId: "09839DpTctU"
      },
      {
        title: "Sweet Child O' Mine",
        artist: "Guns N' Roses",
        colors: ["#FF0000", "#000000", "#FFD700", "#C0C0C0"],
        shapes: ["triangle", "square", "circle"],
        description: "Hard rock anthem with iconic riff",
        youtubeId: "1w7OgIMMRc4"
      },
      {
        title: "Smells Like Teen Spirit",
        artist: "Nirvana",
        colors: ["#808080", "#000000", "#FFFFFF", "#4B0082"],
        shapes: ["square", "rectangle", "circle"],
        description: "Grunge rock defining anthem",
        youtubeId: "hTWKbfoikeg"
      }
    ];

    const SongArtGame = () => {
      const [currentSong, setCurrentSong] = useState(null);
      const [guess, setGuess] = useState('');
      const [guesses, setGuesses] = useState([]);
      const [gameWon, setGameWon] = useState(false);
      const [gameLost, setGameLost] = useState(false);
      const [audioUnlocked, setAudioUnlocked] = useState(false);
      const [isPlaying, setIsPlaying] = useState(false);
      const [showHint, setShowHint] = useState(false);
      const [previewUrl, setPreviewUrl] = useState(null);
      const [loadingAudio, setLoadingAudio] = useState(false);
      const [suggestions, setSuggestions] = useState([]);
      const [showSuggestions, setShowSuggestions] = useState(false);
      const [searchError, setSearchError] = useState(null);
      const [foundTrackInfo, setFoundTrackInfo] = useState(null);
      const [playedSongs, setPlayedSongs] = useState([]);
      const [showVideo, setShowVideo] = useState(false);
      const [playerReady, setPlayerReady] = useState(false);
      const [ytPlayer, setYtPlayer] = useState(null);
      const [volume, setVolume] = useState(50);
      const audioRef = useRef(null);
      const playerRef = useRef(null);
      const MAX_GUESSES = 6;
      const GUESSES_BEFORE_AUDIO = 2;

      useEffect(() => {
        const tag = document.createElement('script');
        tag.src = 'https://www.youtube.com/iframe_api';
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        window.onYouTubeIframeAPIReady = () => {
          console.log('YouTube API Ready');
        };
      }, []);

      useEffect(() => {
        startNewGame();
      }, []);

      useEffect(() => {
        if (showVideo && previewUrl && window.YT && !ytPlayer) {
          const player = new window.YT.Player('youtube-player', {
            height: '200',
            width: '100%',
            videoId: previewUrl,
            playerVars: {
              controls: 1,
              modestbranding: 1,
              rel: 0,
              enablejsapi: 1,
              origin: window.location.origin
            },
            events: {
              onReady: (event) => {
                console.log('Player ready');
                setPlayerReady(true);
                setYtPlayer(event.target);
                // Set initial volume
                event.target.setVolume(volume);
              },
              onStateChange: (event) => {
                // Track playing state
                if (event.data === window.YT.PlayerState.PLAYING) {
                  setIsPlaying(true);
                } else if (event.data === window.YT.PlayerState.PAUSED || event.data === window.YT.PlayerState.ENDED) {
                  setIsPlaying(false);
                }
              },
              onError: (event) => {
                console.error('YouTube player error:', event);
                setSearchError('Error loading audio. Please try refreshing the page.');
              }
            }
          });
        }
      }, [showVideo, previewUrl]);

      const fetchPreviewUrl = async (song) => {
        setLoadingAudio(true);
        setSearchError(null);
        setFoundTrackInfo(null);
        
        if (song.youtubeId) {
          setLoadingAudio(false);
          setFoundTrackInfo({
            title: song.title,
            artist: song.artist,
            album: null
          });
          setShowVideo(true);
          return song.youtubeId;
        }
        
        setLoadingAudio(false);
        setSearchError(`No preview configured for this song`);
        return null;
      };

      const searchDeezerSongs = async (query) => {
        if (!query || query.length < 2) {
          setSuggestions([]);
          return;
        }

        try {
          const searchQuery = query.replace(/ /g, '+');
          const response = await fetch(
            `https://api.deezer.com/search?q=${searchQuery}&limit=10`
          );

          if (response.ok) {
            const data = await response.json();
            if (data.data && data.data.length > 0) {
              const tracks = data.data.map(track => ({
                title: track.title,
                artist: track.artist.name,
                fullText: `${track.title} - ${track.artist.name}`
              }));
              setSuggestions(tracks);
            } else {
              setSuggestions([]);
            }
          }
        } catch (error) {
          console.error('Error searching Deezer:', error);
          searchLocalSongs(query);
        }
      };

      const searchLocalSongs = (query) => {
        const lowerQuery = query.toLowerCase();
        const matches = SONGS.filter(song => 
          song.title.toLowerCase().includes(lowerQuery) ||
          song.artist.toLowerCase().includes(lowerQuery)
        ).map(song => ({
          title: song.title,
          artist: song.artist,
          fullText: `${song.title} - ${song.artist}`
        }));
        setSuggestions(matches);
      };

      const handleInputChange = (e) => {
        const value = e.target.value;
        setGuess(value);
        setShowSuggestions(true);
        searchDeezerSongs(value);
      };

      const selectSuggestion = (suggestion) => {
        setGuess(suggestion.title);
        setSuggestions([]);
        setShowSuggestions(false);
      };

      const startNewGame = () => {
        // Stop any playing audio before starting new game
        if (ytPlayer && playerReady) {
          try {
            ytPlayer.stopVideo();
          } catch (error) {
            console.log('Error stopping video:', error);
          }
        }
        
        let availableSongs = SONGS.filter(song => 
          !playedSongs.some(played => 
            played.title === song.title && played.artist === song.artist
          )
        );

        if (availableSongs.length === 0) {
          setPlayedSongs([]);
          availableSongs = [...SONGS];
        }

        const randomSong = availableSongs[Math.floor(Math.random() * availableSongs.length)];
        
        setPlayedSongs(prev => [...prev, { title: randomSong.title, artist: randomSong.artist }]);
        
        setCurrentSong(randomSong);
        setGuess('');
        setGuesses([]);
        setGameWon(false);
        setGameLost(false);
        setAudioUnlocked(false);
        setIsPlaying(false);
        setShowHint(false);
        setPreviewUrl(null);
        setSuggestions([]);
        setShowSuggestions(false);
        setSearchError(null);
        setFoundTrackInfo(null);
        setShowVideo(false);
        setPlayerReady(false);
        setYtPlayer(null);
        setIsPlaying(false);
        if (audioRef.current) {
          audioRef.current.pause();
          audioRef.current.currentTime = 0;
        }
      };

      const handleGuess = async () => {
        if (!guess.trim() || gameWon || gameLost) return;

        const normalizedGuess = guess.toLowerCase().trim();
        const normalizedTitle = currentSong.title.toLowerCase();
        const normalizedArtist = currentSong.artist.toLowerCase();

        const isCorrect = normalizedGuess === normalizedTitle || 
                          normalizedGuess === `${normalizedTitle} ${normalizedArtist}` ||
                          normalizedGuess === `${normalizedArtist} ${normalizedTitle}` ||
                          normalizedGuess.includes(normalizedTitle) && normalizedGuess.includes(normalizedArtist);

        const newGuesses = [...guesses, { text: guess, correct: isCorrect }];
        setGuesses(newGuesses);

        if (isCorrect) {
          setGameWon(true);
        } else if (newGuesses.length >= MAX_GUESSES) {
          setGameLost(true);
          setAudioUnlocked(true);
          if (!previewUrl && currentSong) {
            const url = await fetchPreviewUrl(currentSong);
            setPreviewUrl(url);
          }
        } else if (newGuesses.length >= GUESSES_BEFORE_AUDIO) {
          setAudioUnlocked(true);
          if (!previewUrl && currentSong) {
            const url = await fetchPreviewUrl(currentSong);
            setPreviewUrl(url);
          }
        }

        setGuess('');
        setSuggestions([]);
        setShowSuggestions(false);
      };

      const toggleAudio = () => {
        if (!ytPlayer || !playerReady) {
          console.log('Player not ready yet');
          return;
        }

        try {
          if (isPlaying) {
            ytPlayer.pauseVideo();
            setIsPlaying(false);
          } else {
            ytPlayer.playVideo();
            setIsPlaying(true);
          }
        } catch (error) {
          console.error('Error controlling player:', error);
          setSearchError('Error playing audio. Try clicking again.');
        }
      };

      const handleVolumeChange = (e) => {
        const newVolume = parseInt(e.target.value);
        setVolume(newVolume);
        if (ytPlayer && playerReady) {
          ytPlayer.setVolume(newVolume);
        }
      };

      useEffect(() => {
        const handleClickOutside = (e) => {
          if (!e.target.closest('.autocomplete-container')) {
            setShowSuggestions(false);
          }
        };
        
        document.addEventListener('mousedown', handleClickOutside);
        return () => document.removeEventListener('mousedown', handleClickOutside);
      }, []);

      const renderArtwork = () => {
        if (!currentSong) return null;

        return (
          <svg width="100%" height="100%" viewBox="0 0 400 400">
            <defs>
              <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style={{ stopColor: currentSong.colors[0], stopOpacity: 1 }} />
                <stop offset="100%" style={{ stopColor: currentSong.colors[1], stopOpacity: 1 }} />
              </linearGradient>
              <radialGradient id="grad2">
                <stop offset="0%" style={{ stopColor: currentSong.colors[2], stopOpacity: 0.8 }} />
                <stop offset="100%" style={{ stopColor: currentSong.colors[3], stopOpacity: 0.9 }} />
              </radialGradient>
            </defs>
            
            <rect width="400" height="400" fill="url(#grad1)" />
            
            {currentSong.shapes.includes('circle') && (
              <>
                <circle cx="200" cy="200" r="80" fill="url(#grad2)" opacity="0.7" />
                <circle cx="280" cy="120" r="50" fill={currentSong.colors[2]} opacity="0.5" />
              </>
            )}
            
            {currentSong.shapes.includes('triangle') && (
              <polygon points="200,80 320,320 80,320" fill={currentSong.colors[3]} opacity="0.6" />
            )}
            
            {currentSong.shapes.includes('square') && (
              <>
                <rect x="100" y="100" width="80" height="80" fill={currentSong.colors[1]} opacity="0.6" transform="rotate(15 140 140)" />
                <rect x="220" y="220" width="100" height="100" fill={currentSong.colors[0]} opacity="0.5" transform="rotate(-20 270 270)" />
              </>
            )}
            
            {currentSong.shapes.includes('rectangle') && (
              <>
                <rect x="50" y="180" width="300" height="40" fill={currentSong.colors[2]} opacity="0.5" />
                <rect x="180" y="50" width="40" height="300" fill={currentSong.colors[3]} opacity="0.4" />
              </>
            )}
            
            <circle cx="100" cy="300" r="40" fill={currentSong.colors[0]} opacity="0.6" />
            <circle cx="320" cy="280" r="30" fill={currentSong.colors[1]} opacity="0.5" />
          </svg>
        );
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4">
          <div className="max-w-2xl mx-auto">
            <div className="text-center mb-8 pt-6">
              <div className="flex items-center justify-center gap-3 mb-2">
                <Music className="w-10 h-10 text-yellow-400" />
                <h1 className="text-4xl font-bold text-white">Song Art</h1>
              </div>
              <p className="text-purple-200">Guess the song from its abstract artwork</p>
            </div>

            <div className="bg-white rounded-lg shadow-2xl p-6 mb-6">
              <div className="aspect-square bg-gray-100 rounded-lg mb-4 overflow-hidden">
                {renderArtwork()}
              </div>

              <div className="flex items-center justify-between mb-4">
                <div className="text-sm text-gray-600">
                  Guesses: {guesses.length}/{MAX_GUESSES}
                </div>
                {audioUnlocked && (
                  <div className="text-sm text-green-600 font-semibold">
                    üéµ Audio Unlocked!
                  </div>
                )}
              </div>

              {(audioUnlocked || gameWon || gameLost) && (
                <div className="mb-4">
                  {previewUrl ? (
                    <>
                      {showVideo ? (
                        <div className="relative bg-gray-900 rounded-lg overflow-hidden" style={{ height: '0px' }}>
                          <div
                            id="youtube-player"
                            style={{ 
                              position: 'absolute',
                              top: '-9999px',
                              left: '-9999px',
                              width: '100%',
                              height: '200px'
                            }}
                          ></div>
                        </div>
                      ) : null}
                      
                      {!gameWon && !gameLost && (
                        <div className="w-full px-6 py-12 rounded-lg bg-gradient-to-br from-purple-600 to-pink-600 text-white text-center">
                          <div className="mb-4">
                            <Music className={`w-16 h-16 mx-auto ${isPlaying ? 'animate-pulse' : ''}`} />
                          </div>
                          <h3 className="text-xl font-bold mb-2">Audio Hint Unlocked!</h3>
                          <p className="text-sm opacity-90 mb-4">
                            {!showVideo ? 'Click to reveal and play' : isPlaying ? 'Now playing...' : 'Click to play audio'}
                          </p>
                          <button
                            onClick={() => {
                              if (!showVideo) {
                                setShowVideo(true);
                                // Give it a moment for the player to initialize
                                setTimeout(() => {
                                  console.log('Video unlocked, player should be initializing');
                                }, 500);
                              } else {
                                toggleAudio();
                              }
                            }}
                            disabled={showVideo && !playerReady}
                            className={`px-6 py-3 rounded-lg font-semibold transition-all ${
                              showVideo && !playerReady
                                ? 'bg-white/50 text-purple-400 cursor-wait'
                                : 'bg-white text-purple-600 hover:bg-gray-100'
                            }`}
                          >
                            {!showVideo ? 'üîì Unlock Audio' : !playerReady ? '‚è≥ Loading...' : isPlaying ? '‚è∏Ô∏è Pause' : '‚ñ∂Ô∏è Play Audio'}
                          </button>
                          
                          {showVideo && playerReady && (
                            <div className="mt-4 px-4">
                              <div className="flex items-center gap-3">
                                <span className="text-sm opacity-75">üîá</span>
                                <input
                                  type="range"
                                  min="0"
                                  max="100"
                                  value={volume}
                                  onChange={handleVolumeChange}
                                  className="flex-1 h-2 bg-white/30 rounded-lg appearance-none cursor-pointer"
                                  style={{
                                    accentColor: 'white'
                                  }}
                                />
                                <span className="text-sm opacity-75">üîä</span>
                                <span className="text-xs bg-white/20 px-2 py-1 rounded min-w-[3rem] text-center">
                                  {volume}%
                                </span>
                              </div>
                            </div>
                          )}
                        </div>
                      )}
                      
                      {foundTrackInfo && !gameWon && !gameLost && (
                        <div className="text-xs text-gray-500 text-center mt-2">
                          <p className="italic">Audio hint available - listen without spoilers!</p>
                        </div>
                      )}
                      {!gameWon && !gameLost && (
                        <p className="text-xs text-gray-500 text-center mt-1">
                          Audio only - no visual clues!
                        </p>
                      )}
                    </>
                  ) : loadingAudio ? (
                    <div className="w-full px-6 py-4 rounded-lg bg-gray-200 text-gray-600 flex items-center justify-center gap-3">
                      <Music className="w-6 h-6 animate-pulse" />
                      Loading...
                    </div>
                  ) : (
                    !gameWon && !gameLost && (
                      <div className="w-full px-6 py-4 rounded-lg bg-yellow-100 text-yellow-800 text-sm">
                        <p className="font-semibold mb-2">üéµ No Preview Available</p>
                        {searchError && (
                          <p className="text-xs mb-2">{searchError}</p>
                        )}
                        <p className="text-xs mt-2 font-semibold">Keep guessing based on the artwork and hint!</p>
                      </div>
                    )
                  )}
                </div>
              )}

              {!gameWon && !gameLost && (
                <>
                  <div className="flex gap-2 mb-4 autocomplete-container relative">
                    <div className="flex-1 relative">
                      <input
                        type="text"
                        value={guess}
                        onChange={handleInputChange}
                        onKeyPress={(e) => {
                          if (e.key === 'Enter') {
                            handleGuess();
                            setShowSuggestions(false);
                          }
                        }}
                        onFocus={() => guess.length >= 2 && setShowSuggestions(true)}
                        placeholder="Enter song title or artist..."
                        className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"
                        autoComplete="off"
                      />
                      {showSuggestions && suggestions.length > 0 && (
                        <div className="absolute z-10 w-full mt-1 bg-white border-2 border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto">
                          {suggestions.map((suggestion, idx) => (
                            <div
                              key={idx}
                              onClick={() => selectSuggestion(suggestion)}
                              className="px-4 py-3 hover:bg-purple-50 cursor-pointer border-b border-gray-100 last:border-b-0"
                            >
                              <div className="font-semibold text-gray-800">{suggestion.title}</div>
                              <div className="text-sm text-gray-600">{suggestion.artist}</div>
                            </div>
                          ))}
                        </div>
                      )}
                    </div>
                    <button
                      onClick={() => {
                        handleGuess();
                        setShowSuggestions(false);
                      }}
                      className="px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-semibold transition-colors"
                    >
                      Guess
                    </button>
                  </div>

                  <button
                    onClick={() => setShowHint(!showHint)}
                    className="w-full px-4 py-2 bg-yellow-100 text-yellow-800 rounded-lg hover:bg-yellow-200 transition-colors flex items-center justify-center gap-2"
                  >
                    <Lightbulb className="w-4 h-4" />
                    {showHint ? 'Hide' : 'Show'} Hint
                  </button>

                  {showHint && currentSong && (
                    <div className="mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-gray-700">
                      {currentSong.description}
                    </div>
                  )}
                </>
              )}

              {guesses.length > 0 && (
                <div className="mt-6">
                  <h3 className="font-semibold text-gray-700 mb-2">Your Guesses:</h3>
                  <div className="space-y-2">
                    {guesses.map((g, idx) => (
                      <div
                        key={idx}
                        className={`flex items-center gap-2 p-3 rounded-lg ${
                          g.correct ? 'bg-green-100 border-2 border-green-500' : 'bg-gray-100'
                        }`}
                      >
                        {g.correct ? (
                          <CheckCircle className="w-5 h-5 text-green-600 flex-shrink-0" />
                        ) : (
                          <XCircle className="w-5 h-5 text-red-500 flex-shrink-0" />
                        )}
                        <span className={g.correct ? 'text-green-800 font-semibold' : 'text-gray-700'}>
                          {g.text}
                        </span>
                      </div>
                    ))}
                  </div>
                </div>
              )}

              {gameWon && (
                <div className="mt-6 p-6 bg-green-100 border-2 border-green-500 rounded-lg text-center">
                  <CheckCircle className="w-16 h-16 text-green-600 mx-auto mb-3" />
                  <h2 className="text-2xl font-bold text-green-800 mb-2">Correct!</h2>
                  <p className="text-green-700 mb-4">
                    "{currentSong.title}" by {currentSong.artist}
                  </p>
                  <p className="text-sm text-green-600 mb-4">
                    You guessed it in {guesses.length} {guesses.length === 1 ? 'try' : 'tries'}!
                  </p>
                  {showVideo && playerReady && (
                    <div className="mb-4 p-3 bg-green-50 rounded-lg">
                      <p className="text-sm text-green-700 mb-2">üéµ Audio still playing - enjoy the song!</p>
                      <button
                        onClick={toggleAudio}
                        className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold transition-colors"
                      >
                        {isPlaying ? '‚è∏Ô∏è Pause' : '‚ñ∂Ô∏è Play'}
                      </button>
                    </div>
                  )}
                  <button
                    onClick={startNewGame}
                    className="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold transition-colors flex items-center gap-2 mx-auto"
                  >
                    <RotateCcw className="w-4 h-4" />
                    Play Again
                  </button>
                </div>
              )}

              {gameLost && (
                <div className="mt-6 p-6 bg-red-100 border-2 border-red-500 rounded-lg text-center">
                  <XCircle className="w-16 h-16 text-red-600 mx-auto mb-3" />
                  <h2 className="text-2xl font-bold text-red-800 mb-2">Game Over!</h2>
                  <p className="text-red-700 mb-4">
                    The song was "{currentSong.title}" by {currentSong.artist}
                  </p>
                  <button
                    onClick={startNewGame}
                    className="px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 font-semibold transition-colors flex items-center gap-2 mx-auto"
                  >
                    <RotateCcw className="w-4 h-4" />
                    Try Again
                  </button>
                </div>
              )}
            </div>

            <div className="text-center text-purple-200 text-sm space-y-1">
              <p>After {GUESSES_BEFORE_AUDIO} guesses, unlock an audio hint!</p>
              <p className="text-xs">Listen to the music without seeing the title</p>
              {playedSongs.length > 0 && (
                <p className="text-xs mt-2">
                  Songs played: {playedSongs.length}/{SONGS.length}
                  {playedSongs.length === SONGS.length && " - Starting fresh next round!"}
                </p>
              )}
            </div>
          </div>
        </div>
      );
    };

    ReactDOM.render(<SongArtGame />, document.getElementById('root'));
  </script>
</body>
</html>